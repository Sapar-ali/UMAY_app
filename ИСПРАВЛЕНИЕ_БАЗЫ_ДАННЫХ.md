# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ë–ê–ó–´ –î–ê–ù–ù–´–•

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: `StringDataRightTruncation` - –ø–æ–ª—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–µ.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ
–ù—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç `fix_database.py` –Ω–∞ —Å–∞–π—Ç–µ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

## üöÄ –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

### 1. –ó–∞–ø—É—Å–∫ –Ω–∞ Railway/Render:
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ SSH –∏–ª–∏ –∫–æ–Ω—Å–æ–ª—å
python fix_database.py
```

### 2. –ò–ª–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é DATABASE_URL
export DATABASE_URL="postgresql://username:password@host:port/database"

# –ó–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç
python fix_database.py
```

### 3. –ò–ª–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∫–æ–Ω—Å–æ–ª—å:
```python
# –í—Å—Ç–∞–≤—å —ç—Ç–æ—Ç –∫–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å Python –Ω–∞ —Å–∞–π—Ç–µ
import os
from sqlalchemy import create_engine, text

database_url = os.getenv('DATABASE_URL')
engine = create_engine(database_url)

with engine.connect() as conn:
    # –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—è
    conn.execute(text("ALTER TABLE \"user\" ALTER COLUMN user_type TYPE varchar(10);"))
    conn.execute(text("ALTER TABLE \"user\" ALTER COLUMN position TYPE varchar(100);"))
    conn.execute(text("ALTER TABLE \"user\" ALTER COLUMN city TYPE varchar(100);"))
    conn.execute(text("ALTER TABLE \"user\" ALTER COLUMN medical_institution TYPE varchar(200);"))
    conn.execute(text("ALTER TABLE \"user\" ALTER COLUMN department TYPE varchar(200);"))
    conn.commit()
    print("‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!")
```

## üìä –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

| –ü–æ–ª–µ | –ë—ã–ª–æ | –°—Ç–∞–ª–æ |
|------|------|-------|
| `user_type` | `character(1)` | `varchar(10)` |
| `position` | `varchar(50)` | `varchar(100)` |
| `city` | `varchar(50)` | `varchar(100)` |
| `medical_institution` | `varchar(100)` | `varchar(200)` |
| `department` | `varchar(100)` | `varchar(200)` |

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç
–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

## ‚ö†Ô∏è –í–∞–∂–Ω–æ
- –°–∫—Ä–∏–ø—Ç –±–µ–∑–æ–ø–∞—Å–µ–Ω –∏ –Ω–µ —É–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ
- –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ —Å—Ö–µ–º–µ —Ç–∞–±–ª–∏—Ü

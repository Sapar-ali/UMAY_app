{% extends "admin/base.html" %}

{% block title %}–£–º–∞–π –ú–∞–º–∞ - –°—É–ø–µ—Ä –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1><i class="fas fa-baby"></i> –£–º–∞–π –ú–∞–º–∞ - –°—É–ø–µ—Ä –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å</h1>
        <div class="btn-group">
            <a href="{{ url_for('admin_mama_content_add') }}" class="btn btn-primary">
                <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç—å—é
            </a>
            <a href="{{ url_for('admin_mama_content_generate') }}" class="btn btn-success">
                <i class="fas fa-magic"></i> –ò–ò-–ì–µ–Ω–µ—Ä–∞—Ü–∏—è
            </a>
            <a href="{{ url_for('admin_mama_content_moderate') }}" class="btn btn-warning">
                <i class="fas fa-eye"></i> –ú–æ–¥–µ—Ä–∞—Ü–∏—è
            </a>
        </div>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card bg-primary text-white">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h4 class="card-title">{{ total_content }}</h4>
                            <p class="card-text">–í—Å–µ–≥–æ —Å—Ç–∞—Ç–µ–π</p>
                        </div>
                        <div class="align-self-center">
                            <i class="fas fa-file-alt fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-success text-white">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h4 class="card-title">{{ published_content }}</h4>
                            <p class="card-text">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ</p>
                        </div>
                        <div class="align-self-center">
                            <i class="fas fa-check-circle fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-warning text-white">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h4 class="card-title">{{ pending_content }}</h4>
                            <p class="card-text">–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</p>
                        </div>
                        <div class="align-self-center">
                            <i class="fas fa-clock fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-info text-white">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h4 class="card-title">{{ categories_stats|length }}</h4>
                            <p class="card-text">–ö–∞—Ç–µ–≥–æ—Ä–∏–π</p>
                        </div>
                        <div class="align-self-center">
                            <i class="fas fa-tags fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5><i class="fas fa-bolt"></i> –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-2">
                            <a href="{{ url_for('admin_mama_content_generate') }}?category=sport&count=5" 
                               class="btn btn-outline-primary btn-block">
                                <i class="fas fa-dumbbell"></i> –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ø–æ—Ä—Ç (5 —Å—Ç–∞—Ç–µ–π)
                            </a>
                        </div>
                        <div class="col-md-3 mb-2">
                            <a href="{{ url_for('admin_mama_content_generate') }}?category=nutrition&count=5" 
                               class="btn btn-outline-success btn-block">
                                <i class="fas fa-apple-alt"></i> –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∏—Ç–∞–Ω–∏–µ (5 —Å—Ç–∞—Ç–µ–π)
                            </a>
                        </div>
                        <div class="col-md-3 mb-2">
                            <a href="{{ url_for('admin_mama_content_generate') }}?category=doctor_advice&count=5" 
                               class="btn btn-outline-info btn-block">
                                <i class="fas fa-user-md"></i> –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–æ–≤–µ—Ç—ã –≤—Ä–∞—á–µ–π (5 —Å—Ç–∞—Ç–µ–π)
                            </a>
                        </div>
                        <div class="col-md-3 mb-2">
                            <a href="{{ url_for('admin_mama_content_moderate') }}" 
                               class="btn btn-outline-warning btn-block">
                                <i class="fas fa-eye"></i> –ú–æ–¥–µ—Ä–∞—Ü–∏—è ({{ pending_content }})
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5><i class="fas fa-chart-pie"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h5>
                </div>
                <div class="card-body">
                    {% if categories_stats %}
                    <div class="table-responsive">
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                    <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                                    <th>–ü—Ä–æ—Ü–µ–Ω—Ç</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for stat in categories_stats %}
                                <tr>
                                    <td>
                                        {% if stat.category == 'sport' %}üèÉ –°–ø–æ—Ä—Ç
                                        {% elif stat.category == 'nutrition' %}üçé –ü–∏—Ç–∞–Ω–∏–µ
                                        {% elif stat.category == 'vitamins' %}üíä –í–∏—Ç–∞–º–∏–Ω—ã
                                        {% elif stat.category == 'body_care' %}üíÖ –£—Ö–æ–¥ –∑–∞ —Ç–µ–ª–æ–º
                                        {% elif stat.category == 'baby_care' %}üë∂ –£—Ö–æ–¥ –∑–∞ –º–∞–ª—ã—à–æ–º
                                        {% elif stat.category == 'doctor_advice' %}üë®‚Äç‚öïÔ∏è –°–æ–≤–µ—Ç—ã –≤—Ä–∞—á–µ–π
                                        {% else %}{{ stat.category }}
                                        {% endif %}
                                    </td>
                                    <td>{{ stat.count }}</td>
                                    <td>{{ "%.1f"|format(stat.count / total_content * 100) }}%</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    {% else %}
                    <p class="text-muted">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ -->
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5><i class="fas fa-clock"></i> –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç–∞—Ç—å–∏</h5>
                </div>
                <div class="card-body">
                    {% if recent_content %}
                    <div class="list-group list-group-flush">
                        {% for item in recent_content %}
                        <div class="list-group-item">
                            <div class="d-flex justify-content-between align-items-start">
                                <div class="flex-grow-1">
                                    <h6 class="mb-1">{{ item.title }}</h6>
                                    <small class="text-muted">
                                        {% if item.category == 'sport' %}üèÉ –°–ø–æ—Ä—Ç
                                        {% elif item.category == 'nutrition' %}üçé –ü–∏—Ç–∞–Ω–∏–µ
                                        {% elif item.category == 'vitamins' %}üíä –í–∏—Ç–∞–º–∏–Ω—ã
                                        {% elif item.category == 'body_care' %}üíÖ –£—Ö–æ–¥ –∑–∞ —Ç–µ–ª–æ–º
                                        {% elif item.category == 'baby_care' %}üë∂ –£—Ö–æ–¥ –∑–∞ –º–∞–ª—ã—à–æ–º
                                        {% elif item.category == 'doctor_advice' %}üë®‚Äç‚öïÔ∏è –°–æ–≤–µ—Ç—ã –≤—Ä–∞—á–µ–π
                                        {% else %}{{ item.category }}
                                        {% endif %}
                                        {% if item.trimester %} | –¢—Ä–∏–º–µ—Å—Ç—Ä: {{ item.trimester }}{% endif %}
                                    </small>
                                </div>
                                <div class="ml-2">
                                    {% if item.is_published %}
                                    <span class="badge badge-success">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ</span>
                                    {% else %}
                                    <span class="badge badge-warning">–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</span>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <p class="text-muted">–ù–µ—Ç —Å—Ç–∞—Ç–µ–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5><i class="fas fa-cogs"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-2">
                            <a href="{{ url_for('admin_mama_content_add') }}" class="btn btn-primary btn-block">
                                <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç—å—é
                            </a>
                        </div>
                        <div class="col-md-3 mb-2">
                            <a href="{{ url_for('admin_mama_content_generate') }}" class="btn btn-success btn-block">
                                <i class="fas fa-magic"></i> –ò–ò-–ì–µ–Ω–µ—Ä–∞—Ü–∏—è
                            </a>
                        </div>
                        <div class="col-md-3 mb-2">
                            <a href="{{ url_for('admin_mama_content_moderate') }}" class="btn btn-warning btn-block">
                                <i class="fas fa-eye"></i> –ú–æ–¥–µ—Ä–∞—Ü–∏—è
                            </a>
                        </div>
                        <div class="col-md-3 mb-2">
                            <a href="{{ url_for('admin_mama_content_analytics') }}" class="btn btn-info btn-block">
                                <i class="fas fa-chart-line"></i> –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

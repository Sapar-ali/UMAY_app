{% extends "mobile/base.html" %}

{% block title %}UMAY - –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Ü–∏—Ñ—Ä–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞{% endblock %}

{% block content %}
<!-- Debug Script -->
<script>
    console.log('üì± Mobile index.html content loaded');
    console.log('üîç Current user authenticated:', {{ 'true' if current_user.is_authenticated else 'false' }});
    console.log('üîç Current user:', {{ current_user.username if current_user.is_authenticated else 'null' }});
</script>

<!-- Mobile Hero Section -->
<section class="mobile-hero mobile-animate-fade-in">
    <div class="mobile-hero-background">
        <img src="{{ url_for('static', filename='assets/Image-1.jpg') }}" alt="UMAY Background" class="mobile-hero-bg">
        <div class="mobile-hero-overlay"></div>
    </div>
    
    <div class="mobile-hero-content">
        <div class="mobile-hero-logo">
            <div class="mobile-logo-circle">
                <img src="{{ url_for('static', filename='assets/new-logo.png') }}" alt="UMAY" class="mobile-logo-image">
            </div>
        </div>
        
        <h1 class="mobile-hero-title mobile-animate-slide-in">
            UMAY
        </h1>
        
        <p class="mobile-hero-subtitle mobile-animate-slide-in">
            –ó–∞–±–æ—Ç–∞, –∑–Ω–∞–Ω–∏–µ, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è
        </p>
        
        <div class="mobile-hero-actions mobile-animate-scale-in">
            {% if current_user.is_authenticated %}
            <a href="{{ url_for('dashboard') }}" class="mobile-btn mobile-btn-primary mobile-btn-full">
                <i class="fas fa-tachometer-alt"></i>
                <span>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</span>
            </a>
            {% else %}
            <div class="mobile-btn-group">
                <a href="{{ url_for('login') }}" class="mobile-btn mobile-btn-primary">
                    <i class="fas fa-sign-in-alt"></i>
                    <span>–í–æ–π—Ç–∏</span>
                </a>
                <a href="{{ url_for('register') }}" class="mobile-btn mobile-btn-secondary">
                    <i class="fas fa-user-plus"></i>
                    <span>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</span>
                </a>
            </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- Mobile Features Section -->
<section class="mobile-features mobile-mt-4">
    <div class="mobile-section-header">
        <h2 class="mobile-section-title">–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ UMAY</h2>
        <p class="mobile-section-subtitle">–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ–¥–∏—Ü–∏–Ω—ã</p>
    </div>
    
    <div class="mobile-grid">
        <div class="mobile-card mobile-animate-scale-in">
            <div class="mobile-card-header">
                <i class="fas fa-user-md fa-2x"></i>
            </div>
            <div class="mobile-card-body">
                <h3 class="mobile-card-title">UMAY Pro</h3>
                <p class="mobile-card-text">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤</p>
                <ul class="mobile-feature-list">
                    <li><i class="fas fa-check"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞–º–∏</li>
                    <li><i class="fas fa-check"></i> –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã</li>
                    <li><i class="fas fa-check"></i> –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã</li>
                </ul>
            </div>
            <div class="mobile-card-footer">
                <a href="{{ url_for('login') if not current_user.is_authenticated else url_for('dashboard') }}" class="mobile-btn mobile-btn-primary mobile-btn-full">
                    <i class="fas fa-arrow-right"></i>
                    <span>–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É</span>
                </a>
            </div>
        </div>
        
        <div class="mobile-card mobile-animate-scale-in">
            <div class="mobile-card-header">
                <i class="fas fa-heart fa-2x"></i>
            </div>
            <div class="mobile-card-body">
                <h3 class="mobile-card-title">UMAY Mama</h3>
                <p class="mobile-card-text">–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –±—É–¥—É—â–∏—Ö –º–∞–º</p>
                <ul class="mobile-feature-list">
                    <li><i class="fas fa-check"></i> –ö–∞–ª–µ–Ω–¥–∞—Ä—å –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏</li>
                    <li><i class="fas fa-check"></i> –°–æ–≤–µ—Ç—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤</li>
                    <li><i class="fas fa-check"></i> –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è</li>
                </ul>
            </div>
            <div class="mobile-card-footer">
                <a href="{{ url_for('mama.dashboard') if current_user.is_authenticated else url_for('login') }}" class="mobile-btn mobile-btn-primary mobile-btn-full">
                    <i class="fas fa-arrow-right"></i>
                    <span>–£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ</span>
                </a>
            </div>
        </div>
        
        <div class="mobile-card mobile-animate-scale-in">
            <div class="mobile-card-header">
                <i class="fas fa-mobile-alt fa-2x"></i>
            </div>
            <div class="mobile-card-body">
                <h3 class="mobile-card-title">–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</h3>
                <p class="mobile-card-text">–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ PWA –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤</p>
                <ul class="mobile-feature-list">
                    <li><i class="fas fa-check"></i> –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω</li>
                    <li><i class="fas fa-check"></i> Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</li>
                    <li><i class="fas fa-check"></i> –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω</li>
                </ul>
            </div>
            <div class="mobile-card-footer">
                <button class="mobile-btn mobile-btn-success mobile-btn-full" id="mobile-install-btn">
                    <i class="fas fa-download"></i>
                    <span>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</span>
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Mobile Stats Section -->
<section class="mobile-stats mobile-mt-4">
    <div class="mobile-section-header">
        <h2 class="mobile-section-title">UMAY –≤ —Ü–∏—Ñ—Ä–∞—Ö</h2>
        <p class="mobile-section-subtitle">–ù–∞—à–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–º–æ–≥–∞–µ—Ç —Ç—ã—Å—è—á–∞–º –ª—é–¥–µ–π</p>
    </div>
    
    <div class="mobile-stats-grid">
        <div class="mobile-stat-item mobile-animate-scale-in">
            <div class="mobile-stat-icon">
                <i class="fas fa-users fa-2x"></i>
            </div>
            <div class="mobile-stat-number">1000+</div>
            <div class="mobile-stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
        </div>
        
        <div class="mobile-stat-item mobile-animate-scale-in">
            <div class="mobile-stat-icon">
                <i class="fas fa-user-md fa-2x"></i>
            </div>
            <div class="mobile-stat-number">50+</div>
            <div class="mobile-stat-label">–í—Ä–∞—á–µ–π</div>
        </div>
        
        <div class="mobile-stat-item mobile-animate-scale-in">
            <div class="mobile-stat-icon">
                <i class="fas fa-heartbeat fa-2x"></i>
            </div>
            <div class="mobile-stat-number">5000+</div>
            <div class="mobile-stat-label">–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π</div>
        </div>
        
        <div class="mobile-stat-item mobile-animate-scale-in">
            <div class="mobile-stat-icon">
                <i class="fas fa-star fa-2x"></i>
            </div>
            <div class="mobile-stat-number">4.9</div>
            <div class="mobile-stat-label">–†–µ–π—Ç–∏–Ω–≥</div>
        </div>
    </div>
</section>

<!-- Mobile CTA Section -->
<section class="mobile-cta mobile-mt-4">
    <div class="mobile-cta-content">
        <h2 class="mobile-cta-title">–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å?</h2>
        <p class="mobile-cta-text">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ UMAY –∏ —Å—Ç–∞–Ω—å—Ç–µ —á–∞—Å—Ç—å—é –±—É–¥—É—â–µ–≥–æ –º–µ–¥–∏—Ü–∏–Ω—ã</p>
        
        <div class="mobile-cta-actions">
            {% if not current_user.is_authenticated %}
            <a href="{{ url_for('register') }}" class="mobile-btn mobile-btn-primary mobile-btn-full">
                <i class="fas fa-rocket"></i>
                <span>–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</span>
            </a>
            <a href="{{ url_for('login') }}" class="mobile-btn mobile-btn-secondary mobile-btn-full">
                <i class="fas fa-sign-in-alt"></i>
                <span>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç?</span>
            </a>
            {% else %}
            <a href="{{ url_for('dashboard') }}" class="mobile-btn mobile-btn-primary mobile-btn-full">
                <i class="fas fa-tachometer-alt"></i>
                <span>–ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–Ω–µ–ª—å</span>
            </a>
            {% endif %}
        </div>
    </div>
</section>

<!-- Mobile PWA Info -->
<section class="mobile-pwa-info mobile-mt-4">
    <div class="mobile-card">
        <div class="mobile-card-header">
            <i class="fas fa-info-circle fa-2x"></i>
        </div>
        <div class="mobile-card-body">
            <h3 class="mobile-card-title">–ß—Ç–æ —Ç–∞–∫–æ–µ PWA?</h3>
            <p class="mobile-card-text">
                Progressive Web App (PWA) - —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞—Ç–∏–≤–Ω–æ–µ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
                –í—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–≥–æ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –≤–∞—à–µ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–∂–µ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞.
            </p>
            
            <div class="mobile-pwa-benefits">
                <div class="mobile-pwa-benefit">
                    <i class="fas fa-download"></i>
                    <span>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω</span>
                </div>
                <div class="mobile-pwa-benefit">
                    <i class="fas fa-wifi"></i>
                    <span>–†–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω</span>
                </div>
                <div class="mobile-pwa-benefit">
                    <i class="fas fa-bell"></i>
                    <span>Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                </div>
                <div class="mobile-pwa-benefit">
                    <i class="fas fa-sync"></i>
                    <span>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Mobile Scripts -->
<script>
    // PWA Install Button
    const mobileInstallBtn = document.getElementById('mobile-install-btn');
    if (mobileInstallBtn) {
        mobileInstallBtn.addEventListener('click', () => {
            if (window.umayPWA && window.umayPWA.deferredPrompt) {
                window.umayPWA.installPWA();
            } else {
                // Show instructions for manual installation
                showInstallInstructions();
            }
        });
    }
    
    // Show install instructions
    function showInstallInstructions() {
        const instructions = `
            <div class="mobile-install-instructions">
                <h3>–ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å UMAY:</h3>
                <ol>
                    <li>–û—Ç–∫—Ä–æ–π—Ç–µ –º–µ–Ω—é –±—Ä–∞—É–∑–µ—Ä–∞ (‚ãÆ)</li>
                    <li>–í—ã–±–µ—Ä–∏—Ç–µ "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"</li>
                    <li>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É</li>
                </ol>
                <p>–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å UMAY" –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞</p>
            </div>
        `;
        
        // Create modal with instructions
        const modal = document.createElement('div');
        modal.className = 'mobile-modal';
        modal.innerHTML = `
            <div class="mobile-modal-content">
                <div class="mobile-modal-header">
                    <h3>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ UMAY</h3>
                    <button class="mobile-modal-close" onclick="this.parentElement.parentElement.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="mobile-modal-body">
                    ${instructions}
                </div>
            </div>
        `;
        
        document.body.appendChild(modal);
    }
    
    // Intersection Observer for animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('mobile-animate-in');
            }
        });
    }, observerOptions);
    
    // Observe all animated elements
    document.querySelectorAll('.mobile-animate-slide-in, .mobile-animate-scale-in, .mobile-animate-fade-in').forEach(el => {
        observer.observe(el);
    });
    
    // Touch feedback for cards
    document.querySelectorAll('.mobile-card').forEach(card => {
        card.addEventListener('touchstart', () => {
            card.style.transform = 'scale(0.98)';
        });
        
        card.addEventListener('touchend', () => {
            card.style.transform = 'scale(1)';
        });
    });
</script>

<!-- Additional Mobile Styles -->
<style>
    .mobile-hero {
        position: relative;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        color: white;
        overflow: hidden;
    }
    
    .mobile-hero-background {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
    }
    
    .mobile-hero-bg {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    
    .mobile-hero-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.4);
    }
    
    .mobile-hero-content {
        position: relative;
        z-index: 1;
        padding: 2rem 1rem;
        max-width: 600px;
    }
    
    .mobile-hero-logo {
        margin-bottom: 2rem;
    }
    
    .mobile-logo-circle {
        width: 120px;
        height: 120px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }
    
    .mobile-logo-image {
        width: 80px;
        height: 80px;
        object-fit: contain;
    }
    
    .mobile-hero-title {
        font-size: 4rem;
        font-weight: 700;
        margin-bottom: 1rem;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }
    
    .mobile-hero-subtitle {
        font-size: 1.25rem;
        margin-bottom: 3rem;
        opacity: 0.9;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    }
    
    .mobile-hero-actions {
        margin-top: 2rem;
    }
    
    .mobile-section-header {
        text-align: center;
        margin-bottom: 2rem;
    }
    
    .mobile-section-title {
        font-size: 2rem;
        font-weight: 700;
        color: var(--mobile-text);
        margin-bottom: 0.5rem;
    }
    
    .mobile-section-subtitle {
        font-size: 1.1rem;
        color: #666;
        max-width: 600px;
        margin: 0 auto;
    }
    
    .mobile-card-title {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 1rem;
        color: var(--mobile-text);
    }
    
    .mobile-card-text {
        color: #666;
        margin-bottom: 1.5rem;
        line-height: 1.6;
    }
    
    .mobile-feature-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    
    .mobile-feature-list li {
        display: flex;
        align-items: center;
        margin-bottom: 0.5rem;
        color: #666;
    }
    
    .mobile-feature-list i {
        color: var(--mobile-success);
        margin-right: 0.5rem;
        width: 16px;
    }
    
    .mobile-stats-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
        margin-top: 2rem;
    }
    
    .mobile-stat-item {
        text-align: center;
        padding: 1.5rem;
        background: white;
        border-radius: var(--mobile-radius);
        box-shadow: var(--mobile-shadow);
        border: 1px solid var(--mobile-border);
    }
    
    .mobile-stat-icon {
        color: var(--mobile-primary);
        margin-bottom: 1rem;
    }
    
    .mobile-stat-number {
        font-size: 2rem;
        font-weight: 700;
        color: var(--mobile-text);
        margin-bottom: 0.5rem;
    }
    
    .mobile-stat-label {
        color: #666;
        font-size: 0.9rem;
    }
    
    .mobile-cta {
        background: linear-gradient(135deg, var(--mobile-primary), var(--mobile-secondary));
        color: white;
        padding: 3rem 1rem;
        text-align: center;
        border-radius: var(--mobile-radius);
        margin: 2rem 0;
    }
    
    .mobile-cta-title {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 1rem;
    }
    
    .mobile-cta-text {
        font-size: 1.1rem;
        margin-bottom: 2rem;
        opacity: 0.9;
    }
    
    .mobile-cta-actions {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        max-width: 400px;
        margin: 0 auto;
    }
    
    .mobile-pwa-benefits {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
        margin-top: 1.5rem;
    }
    
    .mobile-pwa-benefit {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.9rem;
        color: #666;
    }
    
    .mobile-pwa-benefit i {
        color: var(--mobile-primary);
        width: 16px;
    }
    
    .mobile-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2000;
        padding: 1rem;
    }
    
    .mobile-modal-content {
        background: white;
        border-radius: var(--mobile-radius);
        max-width: 500px;
        width: 100%;
        max-height: 80vh;
        overflow-y: auto;
    }
    
    .mobile-modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.5rem;
        border-bottom: 1px solid var(--mobile-border);
    }
    
    .mobile-modal-close {
        background: none;
        border: none;
        font-size: 1.5rem;
        color: #666;
        cursor: pointer;
        padding: 0.5rem;
        border-radius: 50%;
        transition: var(--mobile-transition);
    }
    
    .mobile-modal-close:hover {
        background: var(--mobile-light);
        color: var(--mobile-text);
    }
    
    .mobile-modal-body {
        padding: 1.5rem;
    }
    
    .mobile-install-instructions ol {
        padding-left: 1.5rem;
        margin: 1rem 0;
    }
    
    .mobile-install-instructions li {
        margin-bottom: 0.5rem;
        color: var(--mobile-text);
    }
    
    .mobile-install-instructions p {
        color: #666;
        font-style: italic;
        margin-top: 1rem;
    }
    
    /* Animation classes */
    .mobile-animate-in {
        animation-play-state: running;
    }
    
    /* Responsive adjustments */
    @media (max-width: 480px) {
        .mobile-hero-title {
            font-size: 3rem;
        }
        
        .mobile-stats-grid {
            grid-template-columns: 1fr;
        }
        
        .mobile-pwa-benefits {
            grid-template-columns: 1fr;
        }
    }
</style>

<!-- Final Debug Script -->
<script>
    console.log('üì± Mobile index.html fully loaded');
    console.log('üîç All animations and styles applied');
</script>
{% endblock %}
